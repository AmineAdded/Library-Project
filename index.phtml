<!-- ======= Styles ====== -->
<script src="js/vue.global.js"></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<style>
    .bg-white {
        background-color: #ffffff !important;
    }

    .p-4 {
        padding: 1.5rem !important;
    }

    .rounded {
        border-radius: 0.25rem !important;
        /* 4 pixels */
    }

    .shadow-sm {
        box-shadow: 0 .125rem .25rem rgba(0, 0, 0, 0.075) !important;
    }

    .text-center {
        text-align: center !important;
    }

    .text-primary {
        color: #0d6efd !important;
        /* Couleur primaire par défaut */
    }

    .mb-4 {
        margin-bottom: 1.5rem !important;
        /* 24px */
    }

    .d-flex {
        display: flex !important;
    }

    .justify-content-center {
        justify-content: center !important;
    }

    .align-items-center {
        align-items: center !important;
    }

    .vh-100 {
        height: 100vh !important;
    }

    .list-group-item {
        position: relative;
        display: block;
        padding: 0.75rem 1.25rem;
        background-color: #fff;
        border: 1px solid #ddd;
        border-radius: 0.25rem;
    }

    .justify-content-between {
        justify-content: space-between !important;
    }

    .btn {
        display: inline-block;
        font-weight: 400;
        text-align: center;
        text-decoration: none;
        vertical-align: middle;
        user-select: none;
        background-color: transparent;
        border: 1px solid transparent;
        border-radius: 0.25rem;
        padding: 0.375rem 0.75rem;
        font-size: 1rem;
        line-height: 1.5;
        color: #fff;
    }

    .btn-danger {
        color: #fff;
        background-color: #dc3545;
        border-color: #dc3545;
    }

    .btn-danger:hover {
        color: #fff;
        background-color: #c82333;
        border-color: #bd2130;
    }

    .btn-sm {
        padding: 0.25rem 0.5rem;
        font-size: 0.875rem;
        line-height: 1.5;
        border-radius: 0.2rem;
    }

    .btn-primary {
        color: #fff;
        background-color: #007bff;
        border-color: #007bff;
    }

    .btn-primary:hover {
        color: #fff;
        background-color: #0056b3;
        border-color: #004085;
    }

    .form-control {
        display: block;
        width: 100%;
        height: calc(2.25rem + 2px);
        padding: 0.375rem 0.75rem;
        font-size: 1rem;
        font-weight: 400;
        line-height: 1.5;
        color: #495057;
        background-color: #fff;
        background-clip: padding-box;
        border: 1px solid #ced4da;
        border-radius: 0.25rem;
        transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;
    }

    .form-control:focus {
        color: #495057;
        background-color: #fff;
        border-color: #80bdff;
        outline: 0;
        box-shadow: 0 0 0 0.2rem rgba(38, 143, 255, 0.25);
    }

    .input-group {
        position: relative;
        display: flex;
        width: 100%;
    }

    .input-group .form-control {
        position: relative;
        flex: 1 1 auto;
        width: 1%;
        min-width: 0;
    }

    .input-group-append {
        display: flex;
        position: relative;
    }
</style>

<!-- =============== Navigation ================ -->


<!-- ================ Order Details List ================= -->


<style>
    /* Conteneur principal */
    .statisticsContainer {
        display: flex;
        flex-wrap: wrap;
        gap: 30px;
        justify-content: center;
        padding: 20px;
    }

    /* Section individuelle */
    .statSection {
        background: linear-gradient(145deg, #f8f9fa, #e9ecef);
        border-radius: 16px;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        padding: 25px;
        width: 500px;
        text-align: center;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .statSection:hover {
        transform: translateY(-5px);
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
    }

    .statSection h2 {
        color: #444;
        font-family: 'Roboto', Arial, sans-serif;
        font-weight: bold;
        font-size: 20px;
        margin-bottom: 10px;
    }

    .statSection canvas {
        max-width: 100%;
        height: auto;
    }
</style>

<div class="statisticsContainer">
    <!-- Graphique en barres -->
    <div class="statSection">
        <h2>Statistiques des Livres par Catégorie</h2>
        <p>Quantité de livres disponibles par catégorie</p>
        <canvas id="barChart"></canvas>
    </div>

    <!-- Graphique en secteurs -->
    <div class="statSection">
        <h2>Répartition des Livres</h2>
        <p>Pourcentage des livres par catégorie</p>
        <canvas id="pieChart"></canvas>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
    // Données récupérées via PHP
    const labels = <?php echo json_encode($categorie); ?>;
    const dataValues = <?php echo json_encode($quantite); ?>;

    // Configuration du graphique en barres
    const barData = {
        labels: labels,
        datasets: [{
            label: 'Quantité',
            data: dataValues,
            backgroundColor: [
                'rgba(255, 99, 132, 0.6)',
                'rgba(54, 162, 235, 0.6)',
                'rgba(75, 192, 192, 0.6)',
                'rgba(255, 206, 86, 0.6)',
                'rgba(153, 102, 255, 0.6)',
                'rgba(255, 159, 64, 0.6)'
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 2,
        }]
    };

    const barConfig = {
        type: 'bar',
        data: barData,
        options: {
            responsive: true,
            scales: {
                y: {
                    beginAtZero: true,
                    grid: {
                        color: 'rgba(0, 0, 0, 0.1)'
                    }
                },
                x: {
                    grid: {
                        display: false
                    }
                }
            },
            plugins: {
                legend: {
                    display: false
                },
                title: {
                    display: true,
                    text: 'Quantité de Livres par Catégorie',
                    font: {
                        size: 16,
                        weight: 'bold',
                    },
                    color: '#333'
                },
            }
        }
    };

    // Configuration du graphique en secteurs
    const pieData = {
        labels: labels,
        datasets: [{
            label: 'Pourcentage',
            data: dataValues,
            backgroundColor: [
                'rgb(255, 99, 132)',
                'rgb(54, 162, 235)',
                'rgb(255, 205, 86)',
                'rgb(0, 128, 0)'
            ],
            hoverOffset: 4
        }]
    };

    const pieConfig = {
        type: 'pie',
        data: pieData,
        options: {
            responsive: true,
            plugins: {
                legend: {
                    display: true,
                    position: 'top'
                },
                title: {
                    display: true,
                    text: 'Répartition des Livres par Catégorie',
                    font: {
                        size: 16,
                        weight: 'bold',
                    },
                    color: '#333'
                },
            }
        }
    };

    // Initialisation des graphiques
    const barChart = new Chart(
        document.getElementById('barChart'),
        barConfig
    );

    const pieChart = new Chart(
        document.getElementById('pieChart'),
        pieConfig
    );
</script>
